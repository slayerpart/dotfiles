{"version":1,"windowDimensions":{"x":0,"y":23,"width":1628,"height":1027,"maximized":true},"grammars":{"grammarOverridesByPath":{}},"project":{"deserializer":"Project","paths":["/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app"],"buffers":[{"id":"cf5292f5cab1f3ec35c24378ba98f635","text":"","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":5,"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app/__init__.py","digestWhenLastPersisted":"da39a3ee5e6b4b0d3255bfef95601890afd80709","preferredLineEnding":"\n","nextMarkerId":2,"deserializer":"TextBuffer","version":5},{"id":"c03cc57b65280373afe09962ddfe4741","text":"from flask_restful import Resource, request\n\nfrom app.neo import Neo\n\n\nclass Neighbors(Resource):\n\n    @staticmethod\n    def get(_id):\n        return Neo.neighbors(_id, request.args.get('limit'))\n\n\nclass Suggestion(Resource):\n\n    @staticmethod\n    def get(suggestion_string):\n        return Neo.get_suggestion(suggestion_string)\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":5,"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app/handlers/agentHandlers.py","digestWhenLastPersisted":"7ddba90b734030e2c2556610285bd9c0ecb4441e","preferredLineEnding":null,"nextMarkerId":2,"deserializer":"TextBuffer","version":5},{"id":"60321bc7fd944d3c308fd42f78a82c5f","text":"","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":5,"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app/handlers/relationHandlers.py","digestWhenLastPersisted":"da39a3ee5e6b4b0d3255bfef95601890afd80709","preferredLineEnding":"\n","nextMarkerId":2,"deserializer":"TextBuffer","version":5},{"id":"aee8901bee0bc27b4d352ccf26e5c27a","text":"from flask_restful import Resource, request, reqparse\nfrom app.neo4jResource import get_data_by\n\nparser = reqparse.RequestParser()\n\n\nclass CypherApi(Resource):\n    def get(self):\n        args = request.args\n        return get_data_by(args['query'])\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":5,"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app/handlers/testHandler.py","digestWhenLastPersisted":"14cba70de459a4a07ad69c83e8fadc2365b6a3b8","preferredLineEnding":null,"nextMarkerId":2,"deserializer":"TextBuffer","version":5},{"id":"e96350c55d0f56dfdfbbc4df0cf9b8c6","text":"from py2neo import Graph, authenticate\n\n\nclass Neo:\n    authenticate('bp2015n1ws02:7474', 'neo4j', 'Naumann2015')\n    graph = Graph('http://bp2015n1ws02:7474/db/data/')\n    cypher = graph.cypher\n\n    @classmethod\n    def neighbors(cls, _id, limit):\n        query = \"\"\"\n        MATCH (root:Agent)-[r]->(neighbor)\n        WHERE id(root) = {0}\n        RETURN r\n        \"\"\".format(_id)\n        if limit:\n            query += \"LIMIT {0}\".format(limit)\n        return cls.results(query)\n\n    @classmethod\n    def results(cls, query):\n        records = cls.cypher.execute(query)\n        subgraph = records.to_subgraph()\n        seen = set()\n        nodes = [seen.add(n._id) or {\n            **n.properties,\n            \"id\": n._id,\n            \"type\": n.labels.pop()\n        } for n in subgraph.nodes if n._id not in seen]\n        id_positions = {n[\"id\"]: i for i, n in list(enumerate(nodes))}\n\n        relationships = [{\n            \"source\": id_positions[rel.start_node._id],\n            \"target\": id_positions[rel.end_node._id],\n            \"sourceId\": rel.start_node._id,\n            \"targetId\": rel.end_node._id,\n            \"type\": rel.type\n        } for rel in subgraph.relationships]\n        return {\"nodes\": nodes, \"links\": relationships}\n\n    @classmethod\n    def get_suggestion(cls, suggestion_string):\n        query = \"\"\"\n        MATCH (n:Agent)\n        WHERE lower(n.legalName) CONTAINS lower(\"{0}\")\n        RETURN n.legalName, id(n)\n        Limit 25;\n        \"\"\".format(suggestion_string)\n        records = cls.cypher.execute(query)\n        return [{'name': r[0], 'id': r[1]} for r in records.records]\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":5,"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app/neo.py","digestWhenLastPersisted":"986398a775201e2f8545f1dbba4799d65de7e941","preferredLineEnding":null,"nextMarkerId":2,"deserializer":"TextBuffer","version":5}]},"workspace":{"deserializer":"Workspace","paneContainer":{"deserializer":"PaneContainer","version":1,"root":{"deserializer":"Pane","id":3,"items":[{"deserializer":"TextEditor","id":4,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":5,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app/__init__.py","bufferId":"cf5292f5cab1f3ec35c24378ba98f635","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":8,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":9,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app/handlers/agentHandlers.py","bufferId":"c03cc57b65280373afe09962ddfe4741","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":32,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":33,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app/neo.py","bufferId":"e96350c55d0f56dfdfbbc4df0cf9b8c6","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":24,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":25,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app/handlers/relationHandlers.py","bufferId":"60321bc7fd944d3c308fd42f78a82c5f","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":28,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":29,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app/handlers/testHandler.py","bufferId":"aee8901bee0bc27b4d352ccf26e5c27a","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"}],"activeItemURI":"/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app/__init__.py","focused":false,"flexScale":1},"activePaneId":3},"packagesWithActiveGrammars":["language-python","language-hyperlink","language-todo"],"destroyedItemURIs":[]},"packageStates":{"linter":{"scope":"File"},"fuzzy-finder":{"/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app/__init__.py":1456852915508,"/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app/handlers/agentHandlers.py":1456852858836,"/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app/neo.py":1456852914188,"/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app/handlers/relationHandlers.py":1456852857632,"/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app/handlers/testHandler.py":1456852781874},"metrics":{"sessionLength":168531},"tabs":[{}],"tree-view":{"directoryExpansionStates":{"/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app":{"isExpanded":true,"entries":{"handlers":{"isExpanded":true,"entries":{}}}}},"selectedPath":"/Users/Marvin/Documents/Studium/Bachelorprojekt/webapp/app/__init__.py","hasFocus":true,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}},"fullScreen":false}